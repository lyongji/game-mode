# 解释器模式实现 - Lua脚本解释器

## 概述
本示例实现了一个简单的Lua脚本解释器，展示了如何使用解释器模式将C++与Lua脚本集成。

## 主要功能
- 创建Lua虚拟机环境
- 从文件加载和执行Lua脚本
- 注册C++函数供Lua调用
- 安全的内存管理和错误处理

## 代码结构
```cpp
class 游戏脚本解释器 {
public:
  游戏脚本解释器(); // 初始化Lua状态
  ~游戏脚本解释器(); // 清理资源
  
  bool 执行脚本(const std::string& 脚本内容);
  bool 执行脚本文件(const std::string& 文件路径);
  void 注册函数(const std::string& 函数名, lua_CFunction 函数指针);
  void 清理(); // 显式清理Lua状态
};
```

## 示例Lua脚本
```lua
print("=== 游戏伤害计算系统 ===")
玩家攻击力 = 100
玩家暴击率 = 30  -- 30%暴击率
玩家暴击伤害 = 50  -- 150%暴击伤害

描述, 最终伤害 = 计算伤害(玩家攻击力, 玩家暴击率, 玩家暴击伤害)
print(描述 .. 最终伤害 .. "点伤害")

-- 测试多次伤害计算
for i=1,5 do
  描述, 最终伤害 = 计算伤害(玩家攻击力, 玩家暴击率, 玩家暴击伤害)
  print("第"..i.."次攻击: "..描述 .. 最终伤害 .. "点伤害")
end
```

## 构建与运行
```bash
cd src/5.解释器模式/
xmake -r 解释器模式
xmake r 解释器模式
```

## 设计模式要点
1. **解释器模式**：将Lua语法解析和执行逻辑封装在解释器类中
2. **桥接模式**：C++与Lua通过注册函数交互
3. **资源管理**：使用RAII模式管理Lua状态生命周期
