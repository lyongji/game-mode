#include <format>
#include <iostream>
#include <string>

// ===== 子系统类 =====
// 动画子系统
class 动画系统 {
public:
  void 播放动画(const std::string &动画名称) {
    std::cout << std::format("[动画系统] 播放动画: {}\n", 动画名称);
  }
};

// 音效子系统
class 音效系统 {
public:
  void 播放音效(const std::string &音效名称) {
    std::cout << std::format("[音效系统] 播放音效: {}\n", 音效名称);
  }
};

// 粒子子系统
class 粒子系统 {
public:
  void 生成粒子(const std::string &粒子效果) {
    std::cout << std::format("[粒子系统] 生成粒子: {}\n", 粒子效果);
  }
};

// 伤害计算子系统
class 伤害系统 {
public:
  void 计算伤害(int 目标ID, int 伤害值) {
    std::cout << std::format("[伤害系统] 对目标{}造成{}点伤害\n", 目标ID,
                             伤害值);
  }
};

// ===== 外观类 =====
class 技能释放外观 {
private:
  动画系统 动画;
  音效系统 音效;
  粒子系统 粒子;
  伤害系统 伤害;

public:
  void 释放火球术(int 目标ID) {
    std::cout << "======= 释放火球术 =======\n";
    动画.播放动画("火球投掷");
    音效.播放音效("火球施放");
    粒子.生成粒子("火焰轨迹");
    粒子.生成粒子("爆炸火花");
    伤害.计算伤害(目标ID, 150);
    音效.播放音效("爆炸音效");
    std::cout << "=========================\n\n";
  }

  void 释放治疗术(int 目标ID) {
    std::cout << "======= 释放治疗术 =======\n";
    动画.播放动画("神圣手势");
    音效.播放音效("治愈铃音");
    粒子.生成粒子("圣光粒子");
    粒子.生成粒子("治愈光环");
    伤害.计算伤害(目标ID, -80); // 负值表示治疗
    音效.播放音效("治愈完成");
    std::cout << "=========================\n\n";
  }
};

// ===== 客户端代码 =====
int main() {
  // 创建外观对象
  技能释放外观 技能释放器;

  // 玩家只需要调用简单的接口
  技能释放器.释放火球术(1001); // 对敌人1001释放火球术
  技能释放器.释放治疗术(2001); // 对队友2001释放治疗术

  return 0;
}
